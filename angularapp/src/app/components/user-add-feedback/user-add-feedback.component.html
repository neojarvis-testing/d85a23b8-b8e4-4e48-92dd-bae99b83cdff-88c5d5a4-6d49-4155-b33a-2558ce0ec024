<div class="feedback-container">
    <h2>Submit Feedback</h2>

    <!-- Feedback submission form using Angular's Reactive Forms -->
    <form [formGroup]="feedbackForm" (ngSubmit)="sendNewFeedback()">

        <!-- Textarea for feedback message -->
        <label for="message">Message:</label><br>
        <textarea id="message" formControlName="message" rows="4"></textarea><br>
        <!-- Validation message for feedback input -->
        <div *ngIf="f.message.invalid && (f.message.dirty || f.message.touched)" class="error">
            Message is required.
        </div>

        <!-- Date selection field -->
        <label for="date">Date:</label><br>
        <input type="date" id="date" formControlName="date"><br>
        <!-- Validation message for date input -->
        <div *ngIf="f.date.invalid && (f.date.dirty || f.date.touched)" class="error">
            Date is required.
        </div>

        <!-- Category dropdown selection -->
        <label for="category">Category:</label><br>
        <select id="category" formControlName="category">
            <option value="">Select a category</option>
            <option value="Service">Service</option>
            <option value="Pricing">Pricing</option>
            <option value="Quality">Quality</option>
        </select><br>
        <!-- Validation message for category selection -->
        <div *ngIf="f.category.invalid && (f.category.dirty || f.category.touched)" class="error">
            Category is required.
        </div>

        <!-- Property dropdown (Populated dynamically from Property Component) -->
        <label for="property">Property:</label><br>
        <select id="property" formControlName="property" [disabled]="properties.length === 0">
            <option value="">Select a property</option>
            <option *ngFor="let property of properties" [value]="property.id">{{ property.name }}</option>
        </select><br>
        <!-- Validation message for property selection -->
        <div *ngIf="f.property.invalid && (f.property.dirty || f.property.touched)" class="error">
            Property selection is required.
        </div>
        <!-- Display loading message if property list is empty -->
        <div *ngIf="properties.length === 0" class="loading-message">
            Loading properties, please wait...
        </div>

        <!-- Submit Button (Disabled if form is invalid) -->
        <button type="submit" [disabled]="feedbackForm.invalid">Submit Feedback</button>
    </form>
</div>
